---
layout: post
tags: U盘格式化 Ubuntu
date: 2014-12-30 13:06
thumbnail: https://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/NewTux.svg/150px-NewTux.svg.png
title: linux下的 U盘格式化
published: true
---

1.列出U盘信息
$ sudo fdisk -l
  Device Boot      Start         End      Blocks   Id  System
/dev/sdb1   *          32    31326206    15663087+   c  W95 FAT32 (LBA)

如:sdb1即为对应的U盘
$ sudo umount /dev/sdb1    # 必须先卸载该分区

# 格式化为 FAT 分区
$ sudo mkfs.vfat -F 32 /dev/sdb1       # -F 参数必须大写，参数有 12，16 和 32，分别对应 FAT12，FAT16，FAT32。

# 格式化为 NTFS 分区，先要安装ntfsprogs，以 Ubuntu / Debian 为例：
$ sudo apt-get install ntfsprogs

#然后执行格式化命令，以格式化 /dev/sda1 分区为例：
$ sudo umount /dev/sdb1       # 必须先卸载该分区
$ sudo mkfs.ntfs /dev/sdb1        # 格式化为ntfs速度有点慢。

# 格式化为ext4/3/2 ， 以格式化 /dev/sdb1 分区为例：
$ sudo umount /dev/sdb1       # 必须先卸载该分区
$ sudo mkfs.ext4 /dev/sdb1    # 格式化为ext4分区
$ sudo mkfs.ext3 /dev/sdb1    # 格式化为ext3分区
$ sudo mkfs.ext2 /dev/sdb1    # 格式化为ext2分区


一、针对将要格式化的分区，以ext3为例：
$ sudo umount /dev/sdb1     # 必须先卸载该分区，这里要格式化的是 /dev/sda1 分区。
$ sudo mkfs.ext3 -m 0.05 /dev/sdb1     # 注意-m后的参数，设定的已经是百分位，这里设定为0.05，是0.05%，也就是万分之5！

好了，这样以1T的分区为例，1T=1024GB=1048576MB（都是乘以1024的关系），1048576MB*0.0005=524.288MB。

也就是说设定-m参数之后，保留区大概是524MB。当然你可以根据自己喜好设定。

二、对已经格式化完毕的分区，并且不想擦出分区中的数据，可以使用tune2fs -m的方法：
# 这条命令无须先卸载分区。
$ sudo tune2fs -m 0.05 /dev/sdb2       # 这个例子是转换 /dev/sda2 分区的super user保留区，同样设定为0.05，在提醒一次，是0.05%，也就是万分之5。


==============================================================================================
==============================================================================================

重新分区
$ sudo fdisk /dev/sdb
进入交互界面,按住 m 查看帮助
 d 删除分区 输入对应的分区号 或者直接使用 d1 d2这样的命令直接删掉对应的分区,当仅剩余一个分区时d 会直接删除该分区
 n 创建分区,然后输入大小如: +512M  +1024M 不填的话直接回车默认为最大的容量大小

 p 查看分区情况

最后 w 保存信息

[参考网址:] http://blog.csdn.net/android_learn/article/details/6893313
[参考网址:] http://blog.csdn.net/g446868263/article/details/6937778


